var express = require('express');
var app = express();
app.listen(777);


let fs = require('fs');
eval(fs.readFileSync('broadlinkjs.js')+'');
var b = new Broadlink();
b.discover();


b.on("deviceReady", (dev) => {


    app.get('/tv/on', function(req, res){
        var bu = new Buffer('2600d200949413371336143614121311131213121312133713371337131213111412131113121436131312121337133713121312133614121337133713121212133713371313130006019493143713371337131213111312141113121337133713371312131213121311131313361412121213371337131213121337131213371337131213111436133713131300060194941337133713371312131113131311131213371337133713121213131213111313133713121212133713371312131213371312133713371312121214361436141213000d05000000000000', 'hex')
        dev.sendData(bu)
        res.sendStatus(200)
    });
    app.get('/tv/hdmi3', function(req, res){
        var bu = new Buffer('2600d200959314361436153516101411141113121411133614361436151014111411141114111312143515111311141214101436143614361411143515351535153515111411120006019495153514351436141214111411131214111336143614361510141113121411141112131435151113111412131114361436143615101435153515351535151114111400060093951535143614361510141114111213141113361436143615101412141014111411111414351511131114121410143614361436141114351535153515351511141114000d05000000000000', 'hex')
        dev.sendData(bu)
        res.sendStatus(200)
    });


    app.get('/atv/up', function(req, res){
        var bu = new Buffer('260050000001289313121336133712371312133613371336133613371336131114121312121213361411143613121336131213121312131213361311141114121213131113121312130005980001274914000d050000000000000000', 'hex')
        dev.sendData(bu)
        res.sendStatus(200)
    });
    app.get('/atv/down', function(req, res){
        var bu = new Buffer('260050000001279413121534153415351510153415351534153415351534150f14121312150f1336141115101535153415101510131214111534150f141114121411150f13121312150005960001274914000d050000000000000000', 'hex')
        dev.sendData(bu)
        res.sendStatus(200)
    });
    app.get('/atv/left', function(req, res){
        var bu = new Buffer('260050000001289313121336143613361312153415351534153514351534151013121312151015341535141013121336141115101312131214351510151013121312150f160f1312150005960001274914000d050000000000000000', 'hex')
        dev.sendData(bu)
        res.sendStatus(200)
    });
    app.get('/atv/right', function(req, res){
        var bu = new Buffer('260050000001289313121336143613361312153514351534153514351534151013121312150f15341412133613361411141115101312131215341510151013121312141015101411150005960001274a13000d050000000000000000', 'hex')
        dev.sendData(bu)
        res.sendStatus(200)
    });
    app.get('/atv/ok', function(req, res){
        var bu = new Buffer('2600980000012a9b1214113a1139123812141238123812391239113912391213121312131214123911141115113912381239121312391114113a11141213121412131213121412131200055000012a9a111511391238123912131239113a1139123812391238121411141115131211391239121312381214121312141114111514361213121412131213131313121213120005500001294b11000d05', 'hex')
        dev.sendData(bu)
        res.sendStatus(200)
    });
    app.get('/atv/play', function(req, res){
        var bu = new Buffer('260098000001299c121312391139113a12131238123912381239113a1139121312141213121312391239113912391238123812141239111411391214111412131214121312131213120005500001299c121312391238123812141239113912391238123812391214111411141115113912381214123812141115111411141114113a12131213121412131213121312141200054f0001294b12000d05', 'hex')
        dev.sendData(bu)
        res.sendStatus(200)
    });
    app.get('/atv/menu', function(req, res){
        var bu = new Buffer('260050000001279413121336133614361312153415351336153415351435150f1411160f1511133615341535141013121312150f1411141214351510150f14111411151013121411140005970001274914000d050000000000000000', 'hex')
        dev.sendData(bu)
        res.sendStatus(200)
    });



    app.get('/sb/inputtv', function(req, res){
        var bu = new Buffer('2600900000012a921510143615101535153515361411123814361436141114361510151015361411141114361535153515101510160f160f16341610151015101535153515351535150004f5000127931312133713121337143614361412133713371337131213371312131213371411141114371336143713121312131213121436141114111412133713371337133713000d050000000000000000', 'hex')
        dev.sendData(bu)
        res.sendStatus(200)
    });
    app.get('/sb/volup', function(req, res){
        var bu = new Buffer('2600900000012993141114361312143613371337131211391337113913121337131213121139131213371336141213121113121314111412131114111436143614361436123814361400050400012a921411143614111238143614361411143614361436121314361411141114361213143614361411131214111411121313121213141113371238123813371337133713000d050000000000000000', 'hex')
        dev.sendData(bu)
        res.sendStatus(200)
    });
    app.get('/sb/voldown', function(req, res){
        var bu = new Buffer('26009000000129931213143614111238123814361411133712381337121312381312111411391312131213371312111413121312131211141139131211391139133713361436143614000503000129931114113911141139133711391114113812381437111314361213141112381213141114361411121314111411141114111238121312381238123812381436123813000d050000000000000000', 'hex')
        dev.sendData(bu)
        res.sendStatus(200)
    });


});

b.discover();
